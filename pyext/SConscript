Import('env', 'modconfig', 'pythoninc', 'configure_for_pyext')

e = configure_for_pyext(env, modconfig)
if modconfig['exetype'].startswith('mac10'):
    e.Depends('_mdt.so', '#src/libmdt.dylib')

lib = e.SharedLibrary('_mdt', 'mdt.i', SHLIBPREFIX='',
                      SWIGFLAGS='-python -noproxy',
                      CPPPATH=modconfig['include']+[pythoninc],
                      LIBS=modconfig['libs']+['mdt'],
                      LIBPATH=modconfig['libpath']+['../src'])

libinst = env.Install(modconfig['libinstall'], lib)
pyinst = env.Install(modconfig['pyinstall'], 'mdt.py')
env.Alias('install', [libinst, pyinst])
